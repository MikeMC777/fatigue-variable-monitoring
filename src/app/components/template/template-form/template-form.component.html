<div class="justify-content-center row py-4">
  <div class="row form-wrapper px-xl-4 py-xl-2">
    <form onkeydown="return event.key != 'Enter'" *ngIf="loaded; else loading" [formGroup]="templateFormGroup" class="col-12">
      <div class="row">
        <div class="col-12 row">
          <div class="row pb-0 pb-md-2 mx-0 px-0">
            <div class="col-12 col-md-3 mb-3 text-truncate">
              <label class="mb-1" for="deviceSelect" matTooltip="Dispositivo" matTooltipPosition="right">Dispositivo</label>
              <select class="form-control" id="deviceSelect" (change)="onChangeDeviceSelect()"
                formControlName="device_id" style="height: 2.4rem;">
                <option [value]="item.id" selected *ngFor="let item of deviceOptions"> {{item.name}}
                </option>
              </select>
            </div>
            <div class="col-12 col-md-3 mb-3 text-truncate">
              <label class="mb-1" for="deviceSelect" matTooltip="Variable" matTooltipPosition="right">Variable</label>
              <select class="form-control" id="deviceSelect" (change)="onChangeVariableSelect()"
                formControlName="variable_id" style="height: 2.4rem;">
                <option [value]="item.id" selected *ngFor="let item of variableOptions"> {{item.name}}
                </option>
              </select>
            </div>
            <div class="col-12 col-md-3 form-group-feedback text-truncate">
              <label class="mb-1" for="positionContent" matTooltip="Recuerda que no pueden haber dos plantillas con el mismo dispositivo e igual posición." matTooltipPosition="right">Posición</label>
              <small class="text-danger" *ngIf="position.hasError('required') && position.touched">Campo requerido</small>
              <input formControlName="position" autocomplete="off" type="number" aria-describedby="positionContentHelp" class="form-control" id="positionContent" placeholder="Ingrese la posición en la trama">
            </div>
          </div>
        </div>
        <div class="col-12 button-container py-2">
          <button mat-raised-button class="btn btn-outline-danger mx-2" mat-button (click)="onCancel()">
            <i class="fa fa-times" aria-hidden="true"></i> Cancelar</button>
          <ng-container *ngIf="router.url === '/edit-template'; then editTemplateButton else createTemplateButton">
          </ng-container>
          <ng-template #createTemplateButton>
              <button mat-raised-button [disabled]="templateFormGroup.invalid || typing" class="btn btn-outline-success mx-2" mat-button (click)="onCreate()">
                <i class="fa fa-check-circle" aria-hidden="true"></i> Guardar</button>
          </ng-template>
          <ng-template #editTemplateButton>
              <button mat-raised-button [disabled]="templateFormGroup.invalid" class="btn btn-outline-success mx-2" mat-button (click)="onUpdate()">
                <i class="fa fa-check-circle" aria-hidden="true"></i> Guardar</button>
          </ng-template>
        </div>
      </div>
    </form>
    <ng-template #loading>
      <div class="d-block justify-content-center text-center m-5">
        <div class="spinner-grow text-info" role="status">
          <span class="sr-only">Loading...</span>
        </div>
        <div class="spinner-grow text-secondary" role="status">
          <span class="sr-only">Loading...</span>
        </div>
        <div class="spinner-grow text-success" role="status">
          <span class="sr-only">Loading...</span>
        </div>
      </div>
    </ng-template>
  </div>
</div>
<div class="bottom-space"></div>

