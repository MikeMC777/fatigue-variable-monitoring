<div class="justify-content-center row py-4">
  <div class="row form-wrapper px-xl-4 py-xl-2">
    <form onkeydown="return event.key != 'Enter'" *ngIf="loaded; else loading" [formGroup]="employeeFormGroup" class="col-12">
      <div class="row">
        <div class="col-12 row">
          <div class="row pb-0 pb-md-4 mx-0 px-0">
            <div class="col-12 col-md-3 form-group-feedback text-truncate">
              <label class="mb-1" for="nameContent" matTooltip="Primer Nombre" matTooltipPosition="right">Primer Nombre</label>
              <small class="text-danger" *ngIf="name.hasError('required') && name.touched">Campo requerido</small>
              <small class="text-danger" *ngIf="name.hasError('maxlength')">Máximo 30 caracteres</small>
              <input formControlName="name" autocomplete="off" type="text" aria-describedby="nameContentHelp" class="form-control" id="nameContent" placeholder="Ingrese primer nombre">
            </div>
            <div class="col-12 col-md-3 form-group-feedback text-truncate">
              <label class="mb-1" for="secondNameContent" matTooltip="Segundo Nombre" matTooltipPosition="right">Segundo Nombre</label>
              <small class="text-danger" *ngIf="secondName.hasError('maxlength')">Máximo 30 caracteres</small>
              <input formControlName="second_name" autocomplete="off" type="text" aria-describedby="secondNameContentHelp" class="form-control" id="secondNameContent" placeholder="Ingrese segundo nombre">
            </div>
            <div class="col-12 col-md-3 form-group-feedback text-truncate">
              <label class="mb-1" for="surnameContent" matTooltip="Primer Apellido" matTooltipPosition="right">Primer Apellido</label>
              <small class="text-danger" *ngIf="surname.hasError('required') && surname.touched">Campo requerido</small>
              <small class="text-danger" *ngIf="surname.hasError('maxlength')">Máximo 30 caracteres</small>
              <input formControlName="surname" autocomplete="off" type="text" aria-describedby="surnameContentHelp" class="form-control" id="surnameContent" placeholder="Ingrese primer nombre">
            </div>
            <div class="col-12 col-md-3 form-group-feedback text-truncate">
              <label class="mb-1" for="secondSurnameContent" matTooltip="Segundo Apellido" matTooltipPosition="right">Segundo Apellido</label>
              <small class="text-danger" *ngIf="secondSurname.hasError('maxlength')">Máximo 30 caracteres</small>
              <input formControlName="second_surname" autocomplete="off" type="text" aria-describedby="secondSurnameContentHelp" class="form-control" id="secondSurnameContent" placeholder="Ingrese segundo nombre">
            </div>
          </div>
          <div class="row pb-0 pb-md-2 mx-0 px-0">
            <div class="col-12 col-md-3 mb-3 text-truncate">
              <label class="mb-1" for="documentTypeSelect">Tipo de documento</label>
              <select formControlName="document_type" class="form-control" id="documentTypeSelect" style="height: 2.2rem;">
                <option value="CC">Cédula de ciudadanía</option>
                <option value="TI">Tarjeta de identidad</option>
                <option value="NIT">NIT</option>
                <option value="CE">Cédula de extranjería</option>
                <option value="PS">Pasaporte</option>
              </select>
            </div>
            <div class="col-12 col-md-3 form-group-feedback text-truncate">
              <label class="mb-1" for="documentContent">Documento</label>
              <ng-container *ngIf="router.url === '/form-employee'; then createDocument else editDocument">
              </ng-container>
              <ng-template #createDocument>
                <small class="text-danger" *ngIf="document.hasError('required') && document.touched">Campo requerido</small>
                <i *ngIf="!validDocument && document.touched && document.value != null" class="float-right text-danger fa fa-times"></i>
                <i *ngIf="validDocument && document.touched && document.value != null" class="float-right text-info fa fa-check"></i>
                <input autocomplete="off" id="documentContent" type="number" (keydown)="onTyping($event)"
                  (change)="validateDocument()" formControlName="document" aria-describedby="documentHelp"
                  class="form-control" [ngClass]="!validDocument && document.touched ? 'border-danger' : ''"
                  placeholder="Ingrese No. documento">
              </ng-template>
              <ng-template #editDocument>
                <input autocomplete="off" type="text" formControlName="document" class="form-control" id="documentContent" readonly>
              </ng-template>
            </div>
            <div class="col-12 col-md-3 form-group-feedback text-truncate">
              <label class="mb-1" for="positionContent" matTooltip="Segundo Apellido" matTooltipPosition="right">Cargo</label>
              <small class="text-danger" *ngIf="position.hasError('maxlength')">Máximo 100 caracteres</small>
              <input formControlName="position" autocomplete="off" type="text" aria-describedby="positionContentHelp" class="form-control" id="positionContent" placeholder="Ingrese segundo nombre">
            </div>
            <div class="col-12 col-md-3 form-group-feedback text-truncate">
              <mat-form-field appearance="fill">
                <mat-label>Fecha de nacimiento</mat-label>
                <input matInput [matDatepicker]="picker"
                  formControlName="date_of_birth"
                  [max]="maxDate"
                  [ngClass]="dateOfBirth.touched && dateOfBirth.invalid ? 'border-danger is-invalid' : '' ">
                <mat-hint>MM/DD/AAAA</mat-hint>
                <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                <mat-datepicker #picker></mat-datepicker>
              </mat-form-field>
            </div>
          </div>
          <div class="row pb-0 pb-md-4 mx-0 px-0">
            <div class="col-12 col-md-3 form-group-feedback text-truncate">
              <label class="mb-1" for="addressContent" matTooltip="Dirección" matTooltipPosition="right">Dirección</label>
              <small class="text-danger" *ngIf="address.hasError('maxlength')">Máximo 200 caracteres</small>
              <input formControlName="address" autocomplete="off" type="text" aria-describedby="addressContentHelp" class="form-control" id="addressContent" placeholder="Ingrese dirección">
            </div>
            <div class="col-12 col-md-3 form-group-feedback text-truncate">
              <label class="mb-1" for="phoneContent" matTooltip="Teléfono" matTooltipPosition="right">Teléfono</label>
              <small class="text-danger" *ngIf="phone.hasError('maxlength')">Máximo 20 caracteres</small>
              <input formControlName="phone" autocomplete="off" type="text" aria-describedby="phoneContentHelp" class="form-control" id="phoneContent" placeholder="Ingrese número telefónico">
            </div>
            <div class="col-12 col-md-3 form-group-feedback text-truncate">
              <label class="mb-1" for="cellphoneContent" matTooltip="Celular" matTooltipPosition="right">Celular</label>
              <small class="text-danger" *ngIf="cellphone.hasError('maxlength')">Máximo 20 caracteres</small>
              <input formControlName="cellphone" autocomplete="off" type="text" aria-describedby="cellphoneContentHelp" class="form-control" id="cellphoneContent" placeholder="Ingrese número celular">
            </div>
            <div class="col-12 col-md-3 form-group-feedback text-truncate">
              <label class="mb-1" for="emailContent" matTooltip="Correo electrónico" matTooltipPosition="right">Correo electrónico</label>
              <small class="text-danger" *ngIf="email.hasError('required') && email.touched">Campo requerido</small>
              <small class="text-danger" *ngIf="email.hasError('email') && email.touched">Formato de correo inválido</small>
              <small class="text-danger" *ngIf="email.hasError('maxlength')">Máximo 100 caracteres</small>
              <input formControlName="email" autocomplete="off" type="text" aria-describedby="emailContentHelp" class="form-control" id="emailContent" placeholder="Ingrese cuenta de correo">
            </div>
          </div>
          <div class="row pb-0 pb-md-4 mx-0 px-0">
            <div class="col-12 col-md-3 form-group-feedback text-truncate">
              <label class="mb-1" for="weightContent" matTooltip="Peso (kg)" matTooltipPosition="right">Peso (kg)</label>
              <small class="text-danger" *ngIf="weight.hasError('required') && weight.touched">Campo requerido</small>
              <input formControlName="weight" autocomplete="off" type="number" aria-describedby="weightContentHelp" class="form-control" id="weightContent" placeholder="Ingrese el peso en kilogramos">
            </div>
            <div class="col-12 col-md-3 form-group-feedback text-truncate">
              <label class="mb-1" for="heightContent" matTooltip="Altura (cm)" matTooltipPosition="right">Altura (cm)</label>
              <small class="text-danger" *ngIf="height.hasError('required') && height.touched">Campo requerido</small>
              <input formControlName="height" autocomplete="off" type="number" aria-describedby="heightContentHelp" class="form-control" id="heightContent" placeholder="Ingrese la altura en centímetros">
            </div>
          </div>
        </div>
        <div class="col-12 button-container py-2">
          <button mat-raised-button class="btn btn-outline-danger mx-2" mat-button (click)="onCancel()">
            <i class="fa fa-times" aria-hidden="true"></i> Cancelar</button>
          <ng-container *ngIf="router.url === '/edit-employee'; then editEmployeeButton else createEmployeeButton">
          </ng-container>
          <ng-template #createEmployeeButton>
              <button mat-raised-button [disabled]="employeeFormGroup.invalid || !validDocument || typing" class="btn btn-outline-success mx-2" mat-button (click)="onCreate()">
                <i class="fa fa-check-circle" aria-hidden="true"></i> Guardar</button>
          </ng-template>
          <ng-template #editEmployeeButton>
              <button mat-raised-button [disabled]="employeeFormGroup.invalid" class="btn btn-outline-success mx-2" mat-button (click)="onUpdate()">
                <i class="fa fa-check-circle" aria-hidden="true"></i> Guardar</button>
          </ng-template>
        </div>
      </div>
    </form>
    <ng-template #loading>
      <div class="d-block justify-content-center text-center m-5">
        <div class="spinner-grow text-info" role="status">
          <span class="sr-only">Loading...</span>
        </div>
        <div class="spinner-grow text-secondary" role="status">
          <span class="sr-only">Loading...</span>
        </div>
        <div class="spinner-grow text-success" role="status">
          <span class="sr-only">Loading...</span>
        </div>
      </div>
    </ng-template>
  </div>
</div>
